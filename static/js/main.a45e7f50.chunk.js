(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{112:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__2Sv-a"}},113:function(e,t,n){e.exports={mainSection:"home_mainSection__3EQIZ"}},15:function(e,t,n){e.exports={appHeaderWrapper:"app-header_appHeaderWrapper__23r-H",appHeaderNavigation:"app-header_appHeaderNavigation__2dWmD",ul:"app-header_ul__302l9",li:"app-header_li__3HEMH",logo:"app-header_logo__1Ve0i",ulLeft:"app-header_ulLeft__2Kkk4",ulRight:"app-header_ulRight__3yJaH",active:"app-header_active__2WunB"}},211:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(6),i=n(41),s=n.n(i),o=n(3),d=n(15),l=n.n(d),u=n(5),j=n(10),p=n(0);function m(){var e=!!Object(j.j)({path:"/",exact:!0}),t=!!Object(j.j)("/feed"),n=!!Object(j.j)("/profile");return Object(p.jsx)("header",{className:l.a.appHeaderWrapper,children:Object(p.jsxs)("nav",{className:l.a.appHeaderNavigation,children:[Object(p.jsxs)("ul",{className:Object(o.default)("mt-4 mb-4 pt-4 pb-4",l.a.ulLeft,l.a.ul),children:[Object(p.jsxs)(c.c,{to:"/",exact:!0,activeClassName:l.a.active,className:Object(o.default)(l.a.li,"text_type_main-default mr-2 pl-5 pr-5 text_color_inactive"),children:[Object(p.jsx)(u.BurgerIcon,{type:e?"primary":"secondary"}),Object(p.jsx)("span",{className:"pl-2",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(p.jsxs)(c.c,{to:"/feed",exact:!0,activeClassName:l.a.active,className:Object(o.default)(l.a.li,"text_type_main-default pl-5 pr-5 text_color_inactive"),children:[Object(p.jsx)(u.ListIcon,{type:t?"primary":"secondary"}),Object(p.jsx)("span",{className:"pl-2",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(p.jsx)("div",{className:Object(o.default)("mt-4 mb-4",l.a.logo),children:Object(p.jsx)(u.Logo,{})}),Object(p.jsx)("ul",{className:Object(o.default)("mt-4","mb-4","pt-4","pb-4",l.a.ulRight,l.a.ul),children:Object(p.jsxs)(c.c,{to:"/profile",activeClassName:l.a.active,className:Object(o.default)(l.a.li,"text_type_main-default pl-5 pr-5 text_color_inactive"),children:[Object(p.jsx)(u.ProfileIcon,{type:n?"primary":"secondary"}),Object(p.jsx)("span",{className:"pl-2",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})})}var b=a.a.memo(m),f=n(49),O=f.c,_=function(){return Object(f.b)()},h=n(217),g=n(12),x=n(29),v=n.n(x),y=n(218),N=function(e){var t=e.item,n=O((function(e){return e.order.content})),a=Object(r.useMemo)((function(){var e=[];return n.map((function(t){return e.find((function(e){return t.ingredient._id===e.item._id}))||e.push({item:t.ingredient,count:n.filter((function(e){return e.ingredient._id===t.ingredient._id})).length}),t})),e}),[n]),c=Object(y.a)({type:"ingredients",item:t}),i=Object(g.a)(c,2)[1],s=Object(j.g)(),d=Object(j.h)();return Object(p.jsxs)("div",{className:Object(o.default)(v.a.ingredientsSectionContainer,"mt-6"),onClick:function(){s.push({pathname:"/ingredients/".concat(t._id),state:{background:d}})},ref:i,children:[a.find((function(e){return t._id===e.item._id}))&&Object(p.jsx)(u.Counter,{count:function(e){var t=a.find((function(t){return e.name===t.item.name}));return t?t.count:0}(t),size:"default"}),Object(p.jsx)("img",{src:t.image,alt:"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",className:"pr-4 pl-4"}),Object(p.jsxs)("p",{className:Object(o.default)("text_type_digits-default m-1",v.a.ingredientsSectionP,v.a.ingredientsSectionImage),children:[Object(p.jsx)("span",{className:"pr-2",children:t.price}),Object(p.jsx)(u.CurrencyIcon,{type:"primary"})]}),Object(p.jsx)("p",{className:Object(o.default)("text_type_main-default mt-1",v.a.ingredientsSectionP),children:t.name})]})},C=a.a.forwardRef((function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{className:Object(o.default)(v.a.ingredientsSectionCaption,"text_type_main-medium"),ref:t,children:e.caption}),Object(p.jsx)("section",{className:Object(o.default)(v.a.ingredientsSectionWrapper,"mb-10 mr-2 ml-4"),children:e.ingredients.map((function(e){return Object(p.jsx)(N,{item:e},e._id)}))})]})}));function E(){var e=O((function(e){return e.burgerIngredient.ingredients})),t=Object(r.useMemo)((function(){return e.filter((function(e){return"bun"===e.type}))}),[e]),n=Object(r.useMemo)((function(){return e.filter((function(e){return"sauce"===e.type}))}),[e]),c=Object(r.useMemo)((function(){return e.filter((function(e){return"main"===e.type}))}),[e]),i=a.a.useState("bun"),s=Object(g.a)(i,2),d=s[0],l=s[1],j=Object(r.useRef)(null),m=Object(r.useRef)(null),b=Object(r.useRef)(null),f=function(e){switch(l(e),e){case"bun":j.current&&j.current.scrollIntoView();break;case"sauce":m.current&&m.current.scrollIntoView();break;case"main":b.current&&b.current.scrollIntoView()}},_=function(){return Object(p.jsxs)("div",{className:Object(o.default)(v.a.tab,"mb-10"),children:[Object(p.jsx)(u.Tab,{value:"bun",active:"bun"===d,onClick:f,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(p.jsx)(u.Tab,{value:"sauce",active:"sauce"===d,onClick:f,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(p.jsx)(u.Tab,{value:"main",active:"main"===d,onClick:f,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]})};return Object(p.jsxs)("section",{className:Object(o.default)(v.a.section,"mr-10"),children:[Object(p.jsx)("h1",{className:"text text_type_main-large pt-10 pb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(p.jsx)(_,{}),Object(p.jsxs)("div",{className:v.a.menuContainer,onScroll:function(e){e.preventDefault(),j.current&&m.current&&b.current&&(Math.abs(e.target.scrollTop-j.current.offsetTop)<Math.abs(e.target.scrollTop-m.current.offsetTop)&&l("bun"),Math.abs(e.target.scrollTop-j.current.offsetTop)>Math.abs(e.target.scrollTop-m.current.offsetTop)&&Math.abs(e.target.scrollTop-m.current.offsetTop)<Math.abs(e.target.scrollTop-b.current.offsetTop)&&l("sauce"),Math.abs(e.target.scrollTop-b.current.offsetTop)<Math.abs(e.target.scrollTop-m.current.offsetTop)&&l("main"))},children:[Object(p.jsx)(C,{ingredients:t,caption:"\u0411\u0443\u043b\u043a\u0438",ref:j}),Object(p.jsx)(C,{ingredients:n,caption:"\u0421\u043e\u0443\u0441\u044b",ref:m}),Object(p.jsx)(C,{ingredients:c,caption:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",ref:b})]})]})}var S=a.a.memo(E),w=n(30),I=n.n(w),R=n(87),k=n.n(R),T=n.p+"static/media/done.e036971b.png",P=n(48),L=n.n(P),D=n.p+"static/media/loading.b4aa4cad.svg";function U(){return Object(p.jsxs)("div",{className:Object(o.default)(L.a.loadingWindow,"text_type_main-large"),children:["Loading",Object(p.jsx)("img",{src:D,alt:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430",className:L.a.loadingIcon})]})}var W=a.a.memo(U);function A(){return Object(p.jsx)("div",{className:Object(o.default)(L.a.loadingWindow,"text_type_main-large"),children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!"})}var M=a.a.memo(A);var F=function(){var e=O((function(e){return e.order})),t=e.order,n=e.orderRequest,r=e.orderFailed;return n?Object(p.jsx)(W,{}):r?Object(p.jsx)(M,{}):Object(p.jsxs)("div",{className:k.a.detailsContainer,children:[Object(p.jsx)("p",{className:Object(o.default)("mb-4 mt-4 text_type_digits-large",k.a.orderNumber),children:t}),Object(p.jsx)("p",{className:"text_type_main-medium mt-4 mb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(p.jsx)("img",{src:T,alt:"done"}),Object(p.jsx)("p",{className:"text_type_main-default mt-15 mb-1",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(p.jsx)("p",{className:"text_type_main-default text_color_inactive mt-1 mb-30",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},B=n(33),q=n.n(B),G=n(112),H=n.n(G);var z=function(e){return Object(p.jsx)("div",{className:H.a.overlay,onClick:function(){e.onClose()}})},V=document.getElementById("modals");var J=function(e){var t=a.a.useCallback((function(){e.onClose()}),[e]),n=a.a.useCallback((function(t){"Escape"===t.key&&e.onClose()}),[e]);return a.a.useEffect((function(){return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}}),[n]),s.a.createPortal(Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)(z,{onClose:e.onClose}),Object(p.jsxs)("div",{className:Object(o.default)(q.a.modal),children:[Object(p.jsxs)("div",{className:Object(o.default)("text_type_main-large mt-10 mr-10 ml-10",q.a.modalHeader,!e.caption&&q.a.modalCloseIconAlign),children:[e.caption,Object(p.jsx)(u.CloseIcon,{type:"primary",onClick:t})]}),e.children]})]}),V)},Q=n(9),X=n(24),K="https://norma.nomoreparties.space/api/",Y=K+"auth/",Z="wss://norma.nomoreparties.space/orders";function $(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function ee(e,t,n){var r=(n=n||{}).expires;if("number"==typeof r&&r){var a=new Date;a.setTime(a.getTime()+1e3*r),r=n.expires=a}r&&r.toUTCString&&(n.expires=r.toUTCString());var c=e+"="+(t=encodeURIComponent(t));for(var i in n){c+="; "+i;var s=n[i];!0!==s&&(c+="="+s)}document.cookie=c}function te(e){ee(e,"",{expires:-1})}function ne(e){if(!e.ok)throw new Error("response is not ok")}var re=function(){var e=Object(X.a)(Object(Q.a)().mark((function e(){var t;return Object(Q.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,K+"ingredients",e.next=4,fetch("https://norma.nomoreparties.space/api/ingredients");case 4:return ne(t=e.sent),e.abrupt("return",t.json());case 9:throw e.prev=9,e.t0=e.catch(0),new Error("response is not ok");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(X.a)(Object(Q.a)().mark((function e(t){var n,r;return Object(Q.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=K+"orders/"+t.toString(),e.next=4,fetch(n);case 4:return ne(r=e.sent),e.abrupt("return",r.json());case 9:throw e.prev=9,e.t0=e.catch(0),new Error("response is not ok");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(X.a)(Object(Q.a)().mark((function e(t){var n,r;return Object(Q.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=[],t.map((function(e){return n.push(e.ingredient._id)})),K+"orders",e.next=6,fetch("https://norma.nomoreparties.space/api/orders",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+$("token")},body:JSON.stringify({ingredients:n})});case 6:return ne(r=e.sent),e.abrupt("return",r.json());case 11:throw e.prev=11,e.t0=e.catch(0),new Error("response is not ok");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(X.a)(Object(Q.a)().mark((function e(t){var n,r;return Object(Q.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Y+(t.name?"register":"login"),e.next=4,fetch(n,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 4:return ne(r=e.sent),e.abrupt("return",r.json());case 9:throw e.prev=9,e.t0=e.catch(0),new Error("response is not ok");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(X.a)(Object(Q.a)().mark((function e(t){var n;return Object(Q.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,K+"password-reset",e.next=4,fetch("https://norma.nomoreparties.space/api/password-reset",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 4:return ne(n=e.sent),e.abrupt("return",n.json());case 9:throw e.prev=9,e.t0=e.catch(0),new Error("response is not ok");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(X.a)(Object(Q.a)().mark((function e(t){var n;return Object(Q.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,K+"password-reset/reset",e.next=4,fetch("https://norma.nomoreparties.space/api/password-reset/reset",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 4:return ne(n=e.sent),e.abrupt("return",n.json());case 9:throw e.prev=9,e.t0=e.catch(0),new Error("response is not ok");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(X.a)(Object(Q.a)().mark((function e(){var t;return Object(Q.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Y+"token",e.next=4,fetch("https://norma.nomoreparties.space/api/auth/token",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({token:$("refreshToken")})});case 4:return ne(t=e.sent),e.abrupt("return",t.json());case 9:throw e.prev=9,e.t0=e.catch(0),new Error("response is not ok");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(X.a)(Object(Q.a)().mark((function e(){var t,n;return Object(Q.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Y+"user",e.prev=1,e.next=4,fetch(t,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+$("token")},redirect:"follow",referrerPolicy:"no-referrer"});case 4:return ne(n=e.sent),e.abrupt("return",n.json());case 9:e.prev=9,e.t0=e.catch(1),e.prev=11,de().then(function(){var e=Object(X.a)(Object(Q.a)().mark((function e(n){var r;return Object(Q.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.success){e.next=8;break}return ee("refreshToken",n.refreshToken),ee("token",n.accessToken.split("Bearer ")[1]),e.next=5,fetch(t,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+$("token")},redirect:"follow",referrerPolicy:"no-referrer"});case 5:return ne(r=e.sent),e.abrupt("return",r.json());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){})),e.next=18;break;case 15:throw e.prev=15,e.t1=e.catch(11),new Error("response is not ok");case 18:case"end":return e.stop()}}),e,null,[[1,9],[11,15]])})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(X.a)(Object(Q.a)().mark((function e(t){var n;return Object(Q.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Y+"user",e.next=4,fetch("https://norma.nomoreparties.space/api/auth/user",{method:"PATCH",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+$("token")},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 4:return ne(n=e.sent),e.abrupt("return",n.json());case 9:throw e.prev=9,e.t0=e.catch(0),new Error("response is not ok");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(X.a)(Object(Q.a)().mark((function e(){var t;return Object(Q.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Y+"logout",e.next=4,fetch("https://norma.nomoreparties.space/api/auth/logout",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({token:$("refreshToken")})});case 4:return ne(t=e.sent),e.abrupt("return",t.json());case 9:throw e.prev=9,e.t0=e.catch(0),new Error("response is not ok");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),pe="CREATE_ORDER_REQUEST",me="CREATE_ORDER_SUCCESS",be="CREATE_ORDER_ERROR",fe="DELETE_INGREDIENT",Oe="DELETE_ORDER",_e="ADD_INGREDIENT",he="REPLACE_BUN",ge="REORDER",xe="DEFAULT",ve="SET_VISIBLE",ye="DELETE_VISIBLE",Ne="SET_TYPE",Ce="DELETE_TYPE",Ee=function(e){return function(t){var n;t({type:ve}),t({type:Ne,typeModal:"order"}),t((n=e,function(e){e({type:pe}),ce(n).then((function(t){t instanceof Error||(t&&t.success?e({type:me,order:t.order.number}):e({type:be}))})).catch((function(t){e({type:be})}))}))}},Se=n(219),we=function(e){var t,n=e.item,a=_(),c=Object(r.useRef)(null),i=Object(y.a)({type:"constructor",item:n}),s=Object(g.a)(i,2)[1],d=Object(Se.a)({accept:"constructor",drop:function(e){a({type:ge,from:e.order,to:t})},hover:function(e){t=n.order}});s((0,Object(g.a)(d,2)[1])(c));return Object(p.jsxs)("div",{className:Object(o.default)(I.a.container,"mr-2 ml-4 mt-4"),children:[Object(p.jsx)(u.DragIcon,{type:"primary"}),Object(p.jsx)("div",{className:Object(o.default)(I.a.itemCard,"ml-2"),ref:c,children:Object(p.jsx)(u.ConstructorElement,{text:n.ingredient.name,price:n.ingredient.price,thumbnail:n.ingredient.image,handleClose:function(){a({type:fe,id:n.ingredient._id,order:n.order})}})})]})};function Ie(){var e=O((function(e){return e.order.content})),t=Object(r.useMemo)((function(){return e.filter((function(e){return"bun"===e.ingredient.type}))[0]}),[e]),n=Object(r.useMemo)((function(){return e.filter((function(e){return"bun"!==e.ingredient.type}))}),[e]),a=Object(r.useMemo)((function(){return t&&n?n.reduce((function(e,t){return e+t.ingredient.price}),0)+2*t.ingredient.price:t?2*t.ingredient.price:0}),[n,t]),c=_(),i=O((function(e){return e.modal})).isVisible;var s=Object(r.useMemo)((function(){return Object(p.jsx)("div",{className:Object(o.default)(I.a.menuContainer),children:n.sort((function(e,t){return e.order-t.order})).map((function(e){return Object(p.jsx)(we,{item:e},Date.now().toString(36)+Math.random().toString(36).substr(2))}))})}),[n]),d=Object(Se.a)({accept:"ingredients",drop:function(t){"bun"===t.type?c({type:he,item:t}):e.length>=2?c({type:_e,item:t}):c({type:xe})},collect:function(e){return{isHover:e.isOver()}}}),l=Object(g.a)(d,2),m=l[0].isHover,b=l[1],f=Object(j.g)(),h=O((function(e){return e.user})).isAuth,x=e.length<3&&m?I.a.canDrop:"";return Object(p.jsxs)("section",{className:Object(o.default)(I.a.section,"mt-25",x),ref:b,children:[e&&t&&Object(p.jsx)("div",{className:"mr-4 ml-4 pl-8",children:Object(p.jsx)(u.ConstructorElement,{type:"top",isLocked:!0,text:t.ingredient.name+" (\u0432\u0435\u0440\u0445)",price:t.ingredient.price,thumbnail:t.ingredient.image})}),s,e&&t&&Object(p.jsx)("div",{className:"mr-4 ml-4 mt-4 pl-8",children:Object(p.jsx)(u.ConstructorElement,{type:"bottom",isLocked:!0,text:t.ingredient.name+" (\u043d\u0438\u0437)",price:t.ingredient.price,thumbnail:t.ingredient.image})}),i&&Object(p.jsx)(J,{caption:"",onClose:function(){c((function(e){e({type:ye}),e({type:Ce}),e({type:Oe})}))},children:Object(p.jsx)(F,{})}),Object(p.jsxs)("div",{className:Object(o.default)("mt-10 mr-4 mb-10",I.a.finalContainer,I.a.container),children:[Object(p.jsx)("div",{className:I.a.container,children:Object(p.jsxs)("span",{className:Object(o.default)("mr-5 text_type_digits-default",I.a.container),children:[Object(p.jsx)("span",{className:"pr-2",children:a}),Object(p.jsx)(u.CurrencyIcon,{type:"primary"})]})}),Object(p.jsx)(u.Button,{type:"primary",size:"medium",disabled:e.length<1,onClick:function(){h?c(Ee(e)):f.push("/login")},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})}var Re=a.a.memo(Ie),ke=n(116),Te=n(113),Pe=n.n(Te);function Le(){var e=O((function(e){return e.burgerIngredient})),t=e.isIngredientsLoading,n=e.isIngredientsFailed;return t||n?Object(p.jsx)(W,{}):Object(p.jsx)("main",{className:Pe.a.mainSection,children:Object(p.jsxs)(h.a,{backend:ke.a,children:[Object(p.jsx)(S,{}),Object(p.jsx)(Re,{})]})})}var De=a.a.memo(Le),Ue=n(23),We=n(2),Ae=n(38),Me=n.n(Ae),Fe="USER_REQUEST_LOADING",Be="USER_REQUEST_ERROR",qe="USER_UPDATE_REQUEST_ERROR",Ge="USER_LOGOUT_REQUEST_ERROR",He="USER_REQUEST_SUCCESS",ze="USER_LOGOUT_REQUEST_SUCCESS",Ve="EMAIL_REQUEST",Je="EMAIL_SUCCESS",Qe="EMAIL_ERROR",Xe="RESET_PASSWORD_REQUEST",Ke="RESET_PASSWORD_SUCCESS",Ye="RESET_PASSWORD_ERROR",Ze=function(e){return function(t){t({type:Fe}),ie(e).then((function(e){e instanceof Error||(e&&e.success?(ee("refreshToken",e.refreshToken),ee("token",e.accessToken.split("Bearer ")[1]),t({type:He,user:e.user})):t({type:Be}))})).catch((function(e){t({type:Be})}))}},$e=function(){return function(e){e({type:Fe}),le().then((function(t){t instanceof Error?e({type:Be}):t&&t.success?e({type:He,user:t.user}):e({type:Be})})).catch((function(t){e({type:Be})}))}};function et(){var e=Object(r.useState)({email:"",password:""}),t=Object(g.a)(e,2),n=t[0],a=t[1],i=function(e){a(Object(We.a)(Object(We.a)({},n),{},Object(Ue.a)({},e.target.name,e.target.value)))},s=_(),d=Object(r.useCallback)((function(e){e.preventDefault(),s(Ze(n))}),[n,s]);return Object(p.jsxs)("form",{className:Me.a.wrapper,onSubmit:d,children:[Object(p.jsx)("h1",{className:Object(o.default)(Me.a.header,"mb-6 text_type_main-medium"),children:"\u0412\u0445\u043e\u0434"}),Object(p.jsx)("div",{className:"mb-6",children:Object(p.jsx)(u.EmailInput,{onChange:i,value:n.email,name:"email"})}),Object(p.jsx)("div",{className:"mb-6",children:Object(p.jsx)(u.PasswordInput,{name:"password",value:n.password,onChange:i})}),Object(p.jsx)("div",{className:"mb-20",children:Object(p.jsx)(u.Button,{type:"primary",size:"medium",htmlType:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(p.jsxs)("p",{className:Object(o.default)(Me.a.text,"text_type_main-default text_color_inactive","pb-4"),children:["\u0412\u044b \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c? ",Object(p.jsx)(c.b,{to:"/register",className:Me.a.link,children:" \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f "})]}),Object(p.jsxs)("p",{className:Object(o.default)(Me.a.text,"text_type_main-default text_color_inactive"),children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(p.jsx)(c.b,{to:"/forgot-password",className:Me.a.link,children:" \u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c "})]})]})}var tt=a.a.memo(et),nt=n(50),rt=n.n(nt);function at(){var e=Object(r.useState)({name:"",email:"",password:""}),t=Object(g.a)(e,2),n=t[0],a=t[1],i=function(e){a(Object(We.a)(Object(We.a)({},n),{},Object(Ue.a)({},e.target.name,e.target.value)))},s=_(),d=Object(r.useCallback)((function(e){e.preventDefault(),s(Ze(n))}),[n,s]);return Object(p.jsxs)("form",{className:rt.a.wrapper,onSubmit:d,children:[Object(p.jsx)("h1",{className:Object(o.default)(rt.a.header,"mb-6 text_type_main-medium"),children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(p.jsx)("div",{className:"mb-6",children:Object(p.jsx)(u.Input,{value:n.name,onChange:i,placeholder:"\u0418\u043c\u044f",name:"name",size:"default"})}),Object(p.jsx)("div",{className:"mb-6",children:Object(p.jsx)(u.EmailInput,{onChange:i,value:n.email,name:"email"})}),Object(p.jsx)("div",{className:"mb-6",children:Object(p.jsx)(u.PasswordInput,{name:"password",value:n.password,onChange:i})}),Object(p.jsx)("div",{className:"mb-20",children:Object(p.jsx)(u.Button,{type:"primary",size:"medium",htmlType:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})}),Object(p.jsxs)("p",{className:Object(o.default)(rt.a.text,"text_type_main-default text_color_inactive"),children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(p.jsx)(c.b,{to:"/login",className:rt.a.link,children:" \u0412\u043e\u0439\u0442\u0438 "})]})]})}var ct=a.a.memo(at),it=n(51),st=n.n(it);function ot(){var e=Object(r.useState)({password:"",token:""}),t=Object(g.a)(e,2),n=t[0],i=t[1],s=function(e){i(Object(We.a)(Object(We.a)({},n),{},Object(Ue.a)({},e.target.name,e.target.value)))},d=O((function(e){return e.resetPassword})),l=d.isRequestLoading,m=d.isRequestFailed,b=d.isPasswordReset,f=!l&&!m&&b,h=Object(j.g)(),x=_(),v=Object(r.useCallback)((function(e){e.preventDefault(),te("emailResetSend"),x(function(e){return function(t){t({type:Xe}),oe(e).then((function(e){e instanceof Error||(e&&e.success?t({type:Ke}):t({type:Ye}))})).catch((function(e){t({type:Ye})}))}}(n))}),[n,x]);a.a.useEffect((function(){f&&h.replace({pathname:"/login"})}),[h,f]);var y=Object(j.h)();return y.state||y.state.emailHasChecked?l?Object(p.jsx)(W,{}):m?Object(p.jsx)(M,{}):Object(p.jsxs)("form",{className:st.a.wrapper,onSubmit:v,children:[Object(p.jsx)("h1",{className:Object(o.default)(st.a.header,"mb-6 text_type_main-medium"),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(p.jsx)("div",{className:"mb-6",children:Object(p.jsx)(u.Input,{onChange:s,value:n.password,name:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",icon:"ShowIcon"})}),Object(p.jsx)("div",{className:"mb-6",children:Object(p.jsx)(u.Input,{onChange:s,value:n.token,name:"token",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430"})}),Object(p.jsx)("div",{className:"mb-20",children:Object(p.jsx)(u.Button,{type:"primary",size:"medium",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})}),Object(p.jsxs)("p",{className:Object(o.default)(st.a.text,"text_type_main-default text_color_inactive"),children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(p.jsx)(c.b,{to:"/login",className:st.a.link,children:" \u0412\u043e\u0439\u0442\u0438 "})]})]}):Object(p.jsx)(j.a,{to:"/"})}var dt=a.a.memo(ot),lt=n(60),ut=["isForAuthUser","children"],jt=function(e){var t=e.location;return Object(p.jsx)(j.a,{to:{pathname:"/login",state:{from:t}}})},pt=function(e){var t=e.location,n=t.state&&t.state.from;return n?Object(p.jsx)(j.a,{to:{pathname:n.pathname}}):Object(p.jsx)(j.a,{to:{pathname:"/"}})};var mt=function(e){var t=e.isForAuthUser,n=void 0!==t&&t,r=e.children,c=Object(lt.a)(e,ut),i=O((function(e){return e.user})),s=i.isAuth,o=i.isUserLoading,d=a.a.useMemo((function(){return n&&!s?jt:!n&&s?pt:function(){return r}}),[r,s,n]);return o?Object(p.jsx)(W,{}):Object(p.jsx)(j.b,Object(We.a)(Object(We.a)({},c),{},{render:d}))},bt=n(39),ft=n.n(bt);var Ot=function(){var e=O((function(e){return e.burgerIngredient})),t=e.ingredients,n=e.isIngredientsLoading,r=e.isIngredientsFailed,a=Object(j.i)().id;if(n||t.length<1)return Object(p.jsx)(W,{});if(r)return Object(p.jsx)(M,{});var c=t.find((function(e){return e._id===a}));return c?Object(p.jsxs)("div",{className:ft.a.detailsContainer,children:[Object(p.jsx)("div",{children:Object(p.jsx)("img",{src:c.image_large,alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"})}),Object(p.jsx)("p",{className:"mt-4 mb-8 text_type_main-medium",children:c.name}),Object(p.jsxs)("div",{className:Object(o.default)("mb-15 text_color_inactive text_type_main-default",ft.a.caloriesInfoContainer),children:[Object(p.jsxs)("p",{className:ft.a.infoP,children:["\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b",Object(p.jsx)("br",{}),Object(p.jsx)("span",{className:"text_type_digits-default",children:c.calories})]}),Object(p.jsxs)("p",{className:ft.a.infoP,children:["\u0411\u0435\u043b\u043a\u0438, \u0433",Object(p.jsx)("br",{}),Object(p.jsx)("span",{className:"text_type_digits-default",children:c.proteins})]}),Object(p.jsxs)("p",{className:ft.a.infoP,children:["\u0416\u0438\u0440\u044b, \u0433",Object(p.jsx)("br",{}),Object(p.jsx)("span",{className:"text_type_digits-default",children:c.fat})]}),Object(p.jsxs)("p",{className:ft.a.infoP,children:["\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433",Object(p.jsx)("br",{}),Object(p.jsx)("span",{className:"text_type_digits-default",children:c.carbohydrates})]})]})]}):Object(p.jsx)("div",{})},_t=n(52),ht=n.n(_t);function gt(){var e=O((function(e){return e.resetPassword})),t=e.isRequestLoading,n=e.isRequestFailed,i=e.isEmailSend,s=!t&&!n&&i,d=Object(j.g)(),l=Object(r.useState)({email:""}),m=Object(g.a)(l,2),b=m[0],f=m[1],h=_(),x=Object(r.useCallback)((function(e){e.preventDefault(),h(function(e){return function(t){t({type:Ve}),se(e).then((function(e){e instanceof Error||(e&&e.success?t({type:Je}):t({type:Qe}))})).catch((function(e){t({type:Qe})}))}}(b))}),[b,h]);return a.a.useEffect((function(){s&&d.push({pathname:"/reset-password",state:{emailHasChecked:!0}})}),[d,s]),t?Object(p.jsx)(W,{}):n?Object(p.jsx)(M,{}):Object(p.jsxs)("form",{className:ht.a.wrapper,onSubmit:x,children:[Object(p.jsx)("h1",{className:Object(o.default)(ht.a.header,"mb-6 text_type_main-medium"),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(p.jsx)("div",{className:"mb-6",children:Object(p.jsx)(u.Input,{onChange:function(e){f(Object(We.a)(Object(We.a)({},b),{},Object(Ue.a)({},e.target.name,e.target.value)))},value:b.email,name:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail"})}),Object(p.jsx)("div",{className:"mb-20",children:Object(p.jsx)(u.Button,{type:"primary",size:"medium",htmlType:"submit",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})}),Object(p.jsxs)("p",{className:Object(o.default)(ht.a.text,"text_type_main-default text_color_inactive"),children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(p.jsx)(c.b,{to:"/login",className:ht.a.link,children:" \u0412\u043e\u0439\u0442\u0438 "})]})]})}var xt=a.a.memo(gt),vt=n(31),yt=n.n(vt);function Nt(){var e=_(),t=Object(j.g)(),n=O((function(e){return e.user})),a=n.username,i=n.email,s=Object(r.useCallback)((function(n){n.preventDefault(),e((function(e){e({type:Fe}),je().then((function(t){t instanceof Error||(t&&t.success?(te("refreshToken"),te("token"),e({type:ze})):e({type:Ge}))})).catch((function(t){e({type:Ge})}))})),a||i||t.replace("/login")}),[e,t,i,a]);return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:yt.a.linkBlock,children:Object(p.jsx)(c.c,{to:"/profile",exact:!0,activeClassName:yt.a.active,className:Object(o.default)(yt.a.link,"text_type_main-medium text_color_inactive"),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(p.jsx)("div",{className:yt.a.linkBlock,children:Object(p.jsx)(c.c,{to:"/profile/orders",activeClassName:yt.a.active,className:Object(o.default)(yt.a.link,"text_type_main-medium text_color_inactive"),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(p.jsx)("div",{className:yt.a.linkBlock,children:Object(p.jsx)(c.c,{to:"/login",activeClassName:yt.a.active,className:Object(o.default)(yt.a.link,"text_type_main-medium text_color_inactive"),onClick:s,children:"\u0412\u044b\u0445\u043e\u0434"})})]})}var Ct=a.a.memo(Nt),Et=n(42),St=n.n(Et),wt=n(32),It=n(25),Rt=n.n(It),kt=n(220),Tt=function(e){var t=e.order,n=e.IsShowStatus,a=O((function(e){return e.burgerIngredient.ingredients})),c=Object(wt.a)(t.ingredients),i=0;c.length>5&&(c=c.slice(0,5),i=t.ingredients.length-5),c=c.reverse();var s=0,d="";switch(t.status){case"created":d="\u0421\u043e\u0437\u0434\u0430\u043d";break;case"done":d="\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d";break;case"pending":d="\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"}var l=Object(j.g)(),m=Object(j.h)();return Object(p.jsxs)("div",{className:Object(o.default)(Rt.a.card,"p-6"),onClick:function(){l.push({pathname:n?"/profile/orders/".concat(t.number):"/feed/".concat(t.number),state:{background:m}})},children:[Object(p.jsxs)("div",{className:Object(o.default)(Rt.a.cardInfo,"mb-6"),children:[Object(p.jsxs)("p",{className:"text text_type_digits-default",children:["#",t.number]}),Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:new Date(t.createdAt).toLocaleString()})]}),Object(p.jsx)("p",{className:Object(o.default)("text text_type_main-medium mb-2",!n&&"mb-6"),children:t.name}),n&&Object(p.jsx)("p",{className:Object(o.default)("text text_type_main-default mb-6","done"===t.status&&Rt.a.statusDone),children:d}),Object(p.jsxs)("div",{className:Rt.a.ingredientsWrapper,children:[Object(p.jsx)("div",{className:Rt.a.ingredientsImageRowContainer,children:c.map((function(e,t){var n,c=a.find((function(t){return t._id===e}));return c?(s+="bun"===c.type?2*c.price:c.price,n=c.image_mobile):n="https://code.s3.yandex.net/react/code/sauce-03-mobile.png",Object(p.jsxs)(r.Fragment,{children:[Object(p.jsx)("div",{className:Object(o.default)(Rt.a.ingredientImageWrapper,Rt.a.ingredientTransformImageWrapper,i>0&&0===t&&Rt.a.ingredientImageFirstCounter),children:Object(p.jsx)("img",{src:n,className:Object(o.default)(Rt.a.ingredientImage),alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"})}),i>0&&0===t&&Object(p.jsxs)("div",{className:Object(o.default)(Rt.a.ingredientsLeftCounter,"text_type_digits-default"),children:["+",i]})]},kt.a())}))}),Object(p.jsxs)("div",{className:Rt.a.ingredientsInfoWrapper,children:[Object(p.jsx)("p",{className:"text text_type_digits-default",children:s})," ",Object(p.jsx)(u.CurrencyIcon,{type:"primary"})]})]})]})},Pt="WS_CONNECTION_START",Lt="WS_CONNECTION_SUCCESS",Dt="WS_CONNECTION_ERROR",Ut="WS_CONNECTION_CLOSED",Wt="WS_GET_MESSAGE",At="WS_SEND_MESSAGE",Mt=function(e){return{type:Pt,payload:e}},Ft=function(){return{type:Ut,payload:""}},Bt=function(){var e=_(),t=O((function(e){return e.user})),n=t.username,c=t.email,i=t.isAuth,s=t.isUserLoading;n||c||!i||s||e($e());var d={name:n,email:c,password:""},l=a.a.useState(d),j=Object(g.a)(l,2),m=j[0],b=j[1],f=function(e){b(Object(We.a)(Object(We.a)({},m),{},Object(Ue.a)({},e.target.name,e.target.value)))},h=Object(r.useCallback)((function(t){t.preventDefault(),e(function(e){return function(t){t({type:Fe}),ue(e).then((function(e){e instanceof Error||(e&&e.success?t({type:He,user:e.user}):t({type:qe}))})).catch((function(e){t({type:qe})}))}}(m))}),[m,e]);return Object(p.jsxs)("form",{className:Object(o.default)("ml-15"),onSubmit:h,children:[Object(p.jsx)("div",{className:"mb-6",children:Object(p.jsx)(u.Input,{value:m.name,onChange:f,name:"name",placeholder:"\u0418\u043c\u044f",icon:"EditIcon"})}),Object(p.jsx)("div",{className:"mb-6",children:Object(p.jsx)(u.Input,{value:m.email,onChange:f,name:"email",placeholder:"\u041b\u043e\u0433\u0438\u043d",icon:"EditIcon"})}),Object(p.jsx)("div",{className:"mb-6",children:Object(p.jsx)(u.Input,{value:m.password,onChange:f,name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",icon:"EditIcon"})}),Object(p.jsxs)("div",{className:St.a.submitContainer,children:[Object(p.jsx)("p",{className:Object(o.default)("mr-7  text_type_main-small",St.a.cancel),onClick:function(){b(d)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(p.jsx)(u.Button,{type:"primary",size:"medium",htmlType:"submit",children:" \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c "})]})]})},qt=function(){var e=O((function(e){return e.wsReducer})).messages,t=e[e.length-1];if(!t)return Object(p.jsx)(W,{});var n=t.orders;return 0===n.length?Object(p.jsx)(W,{}):Object(p.jsx)("div",{className:Object(o.default)(St.a.feedPageOrdersWrapper,"pr-2 ml-15"),children:n.map((function(e){return Object(p.jsx)(Tt,{order:e,IsShowStatus:!0},kt.a())}))})};function Gt(){var e=_(),t=$("token");a.a.useEffect((function(){return e(Mt(Z+"?token=".concat(t))),function(){e(Ft())}}),[e,t]);var n=!!Object(j.j)("/profile/orders"),r=n?"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432":"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435";return Object(p.jsxs)("main",{className:Object(o.default)(St.a.wrapper,"mt-30"),children:[Object(p.jsxs)("section",{className:St.a.sectionWrapper,children:[Object(p.jsx)(Ct,{}),Object(p.jsx)("div",{className:"mt-20 text_type_main-small text_color_inactive",children:r})]}),!n&&Object(p.jsx)(Bt,{}),n&&Object(p.jsx)(qt,{})]})}var Ht=a.a.memo(Gt),zt="INGREDIENTS_REQUEST",Vt="INGREDIENTS_SUCCESS",Jt="INGREDIENTS_ERROR",Qt=n(26),Xt=n.n(Qt),Kt=function(){var e=_();a.a.useEffect((function(){return e(Mt(Z+"/all")),function(){e(Ft())}}),[e]);var t=O((function(e){return e.wsReducer})).messages,n=t[t.length-1];if(!n)return Object(p.jsx)(W,{});var r=n.orders,c=n.total,i=n.totalToday,s=r.filter((function(e){return"pending"===e.status||"created"===e.status})),d=r.filter((function(e){return"done"===e.status})),l=s.length>9,u=d.length>9;return 0===r.length?Object(p.jsx)(W,{}):Object(p.jsxs)("div",{className:Xt.a.feedPage,children:[Object(p.jsx)("h1",{className:"text text_type_main-large mt-10",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(p.jsxs)("div",{className:Object(o.default)("mt-5",Xt.a.feedPageContainer),children:[Object(p.jsx)("div",{className:Object(o.default)(Xt.a.feedPageOrdersWrapper,"pr-2"),children:r.map((function(e){return Object(p.jsx)(Tt,{order:e,IsShowStatus:!1},kt.a())}))}),Object(p.jsxs)("div",{className:"ml-15",children:[Object(p.jsxs)("div",{className:Object(o.default)(Xt.a.feedPageOrderStatusWrapper,"mb-15"),children:[Object(p.jsxs)("div",{className:Object(o.default)("mr-9"),children:[Object(p.jsx)("p",{className:"text text_type_main-small mb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(p.jsx)("div",{className:Object(o.default)(Xt.a.feedPageStatusContainer,u&&Xt.a.feedPageStatusContainerBig),children:d.map((function(e){return Object(p.jsx)("p",{className:Object(o.default)(Xt.a.orderNumber,"text text_type_digits-default mb-2"),children:e.number},kt.a())}))})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{className:"text text_type_main-small mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(p.jsx)("div",{className:Object(o.default)(Xt.a.feedPageStatusContainer,l&&Xt.a.feedPageStatusContainerBig),children:s.map((function(e){return Object(p.jsx)("p",{className:"text text_type_digits-default mb-2",children:e.number},kt.a())}))})]})]}),Object(p.jsxs)("p",{className:"text text_type_main-small mb-15",children:["\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:",Object(p.jsx)("br",{}),Object(p.jsx)("span",{className:Object(o.default)(Xt.a.numberColor,"text text_type_digits-large"),children:c})]}),Object(p.jsxs)("p",{className:"text text_type_main-small",children:["\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:",Object(p.jsx)("br",{}),Object(p.jsx)("span",{className:Object(o.default)(Xt.a.numberColor,"text text_type_digits-large"),children:i})]})]})]})]})},Yt="SET_ORDERS",Zt="GET_ORDER_REQUEST",$t="GET_ORDER_SUCCESS",en="GET_ORDER_ERROR",tn="DELETE_ORDERS",nn=n(27),rn=n.n(nn);var an=function(){var e=O((function(e){return e.burgerIngredient})),t=e.ingredients,n=e.isIngredientsLoading,r=e.isIngredientsFailed,c=O((function(e){return e.feed})).orderSelected,i=Object(j.i)().id,s=_();a.a.useEffect((function(){var e;s((e=i,function(t){t({type:Zt}),ae(e).then((function(e){e instanceof Error?t({type:en}):e&&e.success?t({type:$t,data:e.orders}):t({type:en})})).catch((function(e){t({type:en})}))}))}),[s,i]);var d=0,l=[],m=[];if(c&&c.ingredients.map((function(e){var n=t.find((function(t){return t._id===e}));return n&&(l.push(n),d+=n.price),n})),l.map((function(e){return m.find((function(t){return e._id===t.item._id}))||m.push({item:e,count:l.filter((function(t){return t._id===e._id})).length}),e})),!c)return Object(p.jsx)(W,{});var b="";switch(c.status){case"created":b="\u0421\u043e\u0437\u0434\u0430\u043d";break;case"done":b="\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d";break;case"pending":b="\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"}return n||t.length<1?Object(p.jsx)(W,{}):r?Object(p.jsx)(M,{}):Object(p.jsxs)("div",{className:Object(o.default)("pl-6 pr-6 pb-6 mt-10"),children:[Object(p.jsx)("p",{className:"text text_type_main-medium mb-3",children:c.name}),Object(p.jsx)("p",{className:Object(o.default)("text text_type_main-default mb-15","done"===c.status&&rn.a.statusColor),children:b}),Object(p.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(p.jsx)("div",{className:Object(o.default)(rn.a.ingredientInfoContainerWrapper,"mb-10"),children:m.map((function(e){return Object(p.jsxs)("div",{className:Object(o.default)(rn.a.ingredientInfoContainer,"mb-4"),children:[Object(p.jsxs)("div",{className:rn.a.infoSum,children:[Object(p.jsx)("div",{className:rn.a.ingredientImageWrapper,children:Object(p.jsx)("img",{src:e.item.image_mobile,className:rn.a.ingredientImage,alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430"})}),Object(p.jsx)("p",{className:"text text_type_main-default ml-4",children:e.item.name})]}),Object(p.jsx)("div",{className:rn.a.infoSum,children:Object(p.jsxs)("p",{className:Object(o.default)(rn.a.infoSum,"ml-4 mr-6"),children:[Object(p.jsxs)("span",{className:"text text_type_digits-default mr-2",children:[e.count," X ",e.item.price]}),Object(p.jsx)(u.CurrencyIcon,{type:"primary"})]})})]},kt.a())}))}),Object(p.jsxs)("div",{className:rn.a.infoCreateAnsSum,children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:new Date(c.createdAt).toLocaleString()}),Object(p.jsxs)("p",{className:Object(o.default)(rn.a.infoSum,"text text_type_digits-default"),children:[Object(p.jsx)("span",{className:"mr-2",children:d}),Object(p.jsx)(u.CurrencyIcon,{type:"primary"})]})]})]})},cn=function(){var e=Object(j.h)(),t=Object(j.g)(),n=e.state&&e.state.background,r="",a=Object(j.j)("/profile/orders/:id");a&&(r=a.params.id);var c=Object(j.j)("/feed/:id");c&&(r=c.params.id);var i=function(){t.goBack()};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(j.d,{location:n||e,children:[Object(p.jsx)(j.b,{exact:!0,path:"/",children:Object(p.jsx)(De,{})}),Object(p.jsx)(j.b,{path:"/ingredients/:id",children:Object(p.jsxs)("div",{className:Object(o.default)(q.a.modalCenter,"mt-30"),children:[Object(p.jsx)("span",{className:Object(o.default)("text_type_main-large",q.a.modalHeader),children:" \u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(p.jsx)(Ot,{})]})}),Object(p.jsx)(j.b,{path:"/feed/:id",children:Object(p.jsxs)("div",{className:Object(o.default)(q.a.modalCenterOrderInfo),children:[Object(p.jsxs)("span",{className:Object(o.default)("text_type_main-medium"),children:["#",r]}),Object(p.jsx)(an,{})]})}),Object(p.jsx)(j.b,{path:"/feed",children:Object(p.jsx)(Kt,{})}),Object(p.jsx)(mt,{path:"/login",children:Object(p.jsx)(tt,{})}),Object(p.jsx)(mt,{path:"/register",children:Object(p.jsx)(ct,{})}),Object(p.jsx)(mt,{path:"/forgot-password",children:Object(p.jsx)(xt,{})}),Object(p.jsx)(mt,{path:"/reset-password",children:Object(p.jsx)(dt,{})}),Object(p.jsx)(mt,{isForAuthUser:!0,path:"/profile/orders/:id",children:Object(p.jsxs)("div",{className:Object(o.default)(q.a.modalCenterOrderInfo),children:[Object(p.jsxs)("span",{className:Object(o.default)("text_type_main-medium"),children:["#",r]}),Object(p.jsx)(an,{})]})}),Object(p.jsx)(mt,{isForAuthUser:!0,path:"/profile",children:Object(p.jsx)(Ht,{})})]}),n&&Object(p.jsx)(j.b,{path:"/ingredients/:id",children:Object(p.jsx)(J,{caption:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",onClose:i,children:Object(p.jsx)(Ot,{})})}),n&&Object(p.jsx)(j.b,{path:"/feed/:id",children:Object(p.jsx)(J,{caption:"#".concat(r),onClose:i,children:Object(p.jsx)(an,{})})}),n&&Object(p.jsx)(j.b,{path:"/profile/orders/:id",children:Object(p.jsx)(J,{caption:"#".concat(r),onClose:i,children:Object(p.jsx)(an,{})})})]})};var sn,on=function(){var e=_(),t=O((function(e){return e.user})),n=t.isAuth,r=t.isUserLoading,c=t.isUserRequestFailed;return!n&&$("token")&&(r||c||e($e())),a.a.useEffect((function(){e((function(e){e({type:zt}),re().then((function(t){t instanceof Error||(t&&t.success?e({type:Vt,items:t.data}):e({type:Jt}))})).catch((function(t){e({type:Jt})}))}))}),[e]),Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)(b,{}),Object(p.jsx)(cn,{})]})},dn=n(59),ln={ingredients:[],isIngredientsLoading:!1,isIngredientsFailed:!1},un={isVisible:!1,typeModal:""},jn={order:null,orderRequest:!1,orderFailed:!1,content:[]},pn={username:"",email:"",isUserLoading:!1,isUserRequestFailed:!1,isAuth:!1},mn={isRequestLoading:!1,isRequestFailed:!1,isEmailSend:!1,isPasswordReset:!1},bn={orders:[],total:0,totalToday:0,isLoading:!1,isError:!1,orderSelected:null},fn={wsConnected:!1,messages:[]},On=Object(dn.b)({burgerIngredient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case zt:return Object(We.a)(Object(We.a)({},e),{},{isIngredientsLoading:!0});case Vt:return Object(We.a)(Object(We.a)({},e),{},{isIngredientsFailed:!1,ingredients:t.items,isIngredientsLoading:!1});case Jt:return Object(We.a)(Object(We.a)({},e),{},{isIngredientsFailed:!0,isIngredientsLoading:!1});default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:un,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return Object(We.a)(Object(We.a)({},e),{},{isVisible:!0});case ye:return Object(We.a)(Object(We.a)({},e),{},{isVisible:!1});case Ne:return Object(We.a)(Object(We.a)({},e),{},{typeModal:t.typeModal});case Ce:return Object(We.a)(Object(We.a)({},e),{},{typeModal:""});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:return Object(We.a)(Object(We.a)({},e),{},{orderRequest:!0});case me:return Object(We.a)(Object(We.a)({},e),{},{orderFailed:!1,order:t.order,orderRequest:!1});case be:return Object(We.a)(Object(We.a)({},e),{},{orderFailed:!0,orderRequest:!1});case Oe:return Object(We.a)(Object(We.a)({},e),{},{order:null,content:[]});case _e:var n=Object(wt.a)(e.content);return n.push({ingredient:t.item,order:n.length+1}),Object(We.a)(Object(We.a)({},e),{},{content:n});case ge:var r=Object(wt.a)(e.content),a=r.findIndex((function(e){return e.order===t.from}));return t.from>t.to?(r.map((function(e){return e.order>=t.to&&e.order!==t.from?++e.order:e.order})),r[a]=Object(We.a)(Object(We.a)({},r[a]),{},{order:t.to})):(r.map((function(e){return e.order<=t.to&&e.order!==t.from?--e.order:e.order})),r[a]=Object(We.a)(Object(We.a)({},r[a]),{},{order:t.to})),Object(We.a)(Object(We.a)({},e),{},{content:r});case he:var c=Object(wt.a)(e.content).filter((function(e){return 1!==e.order&&2!==e.order}));return c.push({ingredient:t.item,order:1}),c.push({ingredient:t.item,order:2}),Object(We.a)(Object(We.a)({},e),{},{content:c});case fe:var i=Object(wt.a)(e.content);return(i=i.filter((function(e){return e.order!==t.order}))).map((function(e){return e.order>t.order?--e.order:e.order})),Object(We.a)(Object(We.a)({},e),{},{content:i});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Fe:return Object(We.a)(Object(We.a)({},e),{},{isUserLoading:!0});case He:return{username:t.user.name,email:t.user.email,isUserLoading:!1,isUserRequestFailed:!1,isAuth:!0};case Be:return Object(We.a)(Object(We.a)({},e),{},{username:"",email:"",isUserLoading:!1,isUserRequestFailed:!0});case qe:case Ge:return Object(We.a)(Object(We.a)({},e),{},{isUserRequestFailed:!0});case ze:return pn;default:return e}},resetPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ve:case Xe:return Object(We.a)(Object(We.a)({},e),{},{isRequestLoading:!0});case Qe:case Ye:return Object(We.a)(Object(We.a)({},e),{},{isRequestFailed:!0,isRequestLoading:!1});case Je:return Object(We.a)(Object(We.a)({},e),{},{isEmailSend:!0,isRequestLoading:!1,isRequestFailed:!1});case Ke:return Object(We.a)(Object(We.a)({},e),{},{isPasswordReset:!0,isRequestLoading:!1,isRequestFailed:!1});default:return e}},feed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Yt:return Object(We.a)(Object(We.a)({},e),{},{total:t.data.total,totalToday:t.data.totalToday,orders:t.data.orders});case tn:return bn;case Zt:return Object(We.a)(Object(We.a)({},e),{},{isLoading:!0});case en:return Object(We.a)(Object(We.a)({},e),{},{isLoading:!1,isError:!0});case $t:return Object(We.a)(Object(We.a)({},e),{},{isLoading:!1,isError:!1,orderSelected:t.data[0]});default:return e}},wsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Lt:return Object(We.a)(Object(We.a)({},e),{},{wsConnected:!0});case Dt:case Ut:return Object(We.a)(Object(We.a)({},e),{},{wsConnected:!1,messages:[]});case Wt:return Object(We.a)(Object(We.a)({},e),{},{messages:[].concat(Object(wt.a)(e.messages),[Object(We.a)({},t.payload)])});default:return e}}}),_n=n(115),hn=["success"],gn={wsInit:Pt,wsSendMessage:At,onOpen:Lt,onClose:Ut,onError:Dt,onMessage:Wt},xn=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||dn.c)(Object(dn.a)(_n.a,(sn=gn,function(e){var t;return function(n){return function(r){var a=e.dispatch,c=r.type,i=r.payload,s=sn.wsInit,o=sn.wsSendMessage,d=sn.onOpen,l=sn.onClose,u=sn.onError,j=sn.onMessage;if(c===s&&(t=new WebSocket(i)),t&&(t.onopen=function(e){a({type:d,payload:e})},t.onerror=function(e){a({type:u,payload:e})},t.onmessage=function(e){var t=e.data,n=JSON.parse(t);if(n.success){n.success;var r=Object(lt.a)(n,hn);a({type:j,payload:r})}},t.onclose=function(e){a({type:l,payload:e})},c===o)){var p=Object(We.a)({},i);t.send(JSON.stringify(p))}n(r)}}}))),vn=Object(dn.d)(On,xn),yn=document.getElementById("root");Object(i.render)(Object(p.jsx)(c.a,{basename:"/react-burger",children:Object(p.jsx)(f.a,{store:vn,children:Object(p.jsx)(on,{})})}),yn)},25:function(e,t,n){e.exports={card:"order-info_card__o7Ple",cardInfo:"order-info_cardInfo__PG3k-",ingredientsWrapper:"order-info_ingredientsWrapper__2ARcp",ingredientsInfoWrapper:"order-info_ingredientsInfoWrapper__2JQGM",ingredientsImageRowContainer:"order-info_ingredientsImageRowContainer__2wT9T",ingredientTransformImageWrapper:"order-info_ingredientTransformImageWrapper__1TNC-",ingredientImageWrapper:"order-info_ingredientImageWrapper__1TzWU",ingredientImageFirstCounter:"order-info_ingredientImageFirstCounter__3Pw43",ingredientImage:"order-info_ingredientImage__2GEkG",ingredientsLeftCounter:"order-info_ingredientsLeftCounter__3R139",statusDone:"order-info_statusDone__2jCuz"}},26:function(e,t,n){e.exports={feedPage:"feed-page_feedPage__1m_l4",feedPageContainer:"feed-page_feedPageContainer__2HNvk",numberColor:"feed-page_numberColor__2LSuU",feedPageOrderStatusWrapper:"feed-page_feedPageOrderStatusWrapper__uJnGF",feedPageStatusContainer:"feed-page_feedPageStatusContainer__3IegJ",feedPageStatusContainerBig:"feed-page_feedPageStatusContainerBig__1zVX0",orderNumber:"feed-page_orderNumber__2S3iz",feedPageOrdersWrapper:"feed-page_feedPageOrdersWrapper__3232p"}},27:function(e,t,n){e.exports={statusColor:"order-info-details_statusColor__2fDKD",infoCreateAnsSum:"order-info-details_infoCreateAnsSum__bbKO_",infoSum:"order-info-details_infoSum__3EqCf",ingredientInfoContainerWrapper:"order-info-details_ingredientInfoContainerWrapper__1R0r0",ingredientInfoContainer:"order-info-details_ingredientInfoContainer__2iI0l",ingredientImageWrapper:"order-info-details_ingredientImageWrapper__15xlT",ingredientImage:"order-info-details_ingredientImage__2tI4p"}},29:function(e,t,n){e.exports={section:"burger-ingredients_section__twR_X",menuContainer:"burger-ingredients_menuContainer__2DcL0",navLink:"burger-ingredients_navLink__OY3fx",ingredientsSectionWrapper:"burger-ingredients_ingredientsSectionWrapper__33EO3",ingredientsSectionCaption:"burger-ingredients_ingredientsSectionCaption__28Pg5",ingredientsSectionP:"burger-ingredients_ingredientsSectionP__17Dln",ingredientsSectionImage:"burger-ingredients_ingredientsSectionImage__pVwg1",tab:"burger-ingredients_tab__3NPmS",ingredientsSectionContainer:"burger-ingredients_ingredientsSectionContainer__37PKC"}},30:function(e,t,n){e.exports={section:"burger-constructor_section__3ZfQC",menuContainer:"burger-constructor_menuContainer__1PEYp",container:"burger-constructor_container__1On2c",itemCard:"burger-constructor_itemCard__2ms_V",finalContainer:"burger-constructor_finalContainer__3zqoc",canDrop:"burger-constructor_canDrop__2PJtb"}},31:function(e,t,n){e.exports={active:"profile-nav_active__1f9xN",linkBlock:"profile-nav_linkBlock__AB_e3",link:"profile-nav_link__3n9pV",logout:"profile-nav_logout__29Pex"}},33:function(e,t,n){e.exports={modal:"modal_modal__jRqX6",modalHeader:"modal_modalHeader__r7ajC",modalCenter:"modal_modalCenter__3KXbh",modalCenterOrderInfo:"modal_modalCenterOrderInfo__31PX-",modalCloseIconAlign:"modal_modalCloseIconAlign__MAWsA"}},38:function(e,t,n){e.exports={wrapper:"login_wrapper__1EFWG",header:"login_header__3zkuU",text:"login_text__1bb-h",link:"login_link__Iu81K"}},39:function(e,t,n){e.exports={detailsContainer:"ingredient-details_detailsContainer__XTnug",caloriesInfoContainer:"ingredient-details_caloriesInfoContainer__OmmQE",infoP:"ingredient-details_infoP__gkh8H"}},42:function(e,t,n){e.exports={wrapper:"profile_wrapper__1q84-",submitContainer:"profile_submitContainer__2_nX-",cancel:"profile_cancel__3yK6d",sectionWrapper:"profile_sectionWrapper__2Et6_",feedPageOrdersWrapper:"profile_feedPageOrdersWrapper__3yT6u"}},48:function(e,t,n){e.exports={loadingWindow:"loading_loadingWindow__2V4Ht",loadingIcon:"loading_loadingIcon__1Y4fA"}},50:function(e,t,n){e.exports={wrapper:"registration_wrapper__3Z0lU",header:"registration_header__zXkJb",text:"registration_text__6Z4vo",link:"registration_link__A4Bgl"}},51:function(e,t,n){e.exports={wrapper:"reset-password_wrapper__1Kty0",header:"reset-password_header__j3wV7",text:"reset-password_text__yjdVt",link:"reset-password_link__1500i"}},52:function(e,t,n){e.exports={wrapper:"forgot-password_wrapper__2Mcpj",header:"forgot-password_header__3Q9-i",text:"forgot-password_text__2niNw",link:"forgot-password_link__11ugV"}},87:function(e,t,n){e.exports={detailsContainer:"order-details_detailsContainer__1l2DR",orderNumber:"order-details_orderNumber__1PNKy"}}},[[211,1,2]]]);
//# sourceMappingURL=main.a45e7f50.chunk.js.map